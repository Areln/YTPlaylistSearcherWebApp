
<div *ngIf="isLoading == true">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>

<div *ngIf="errorMessage != undefined && errorMessage != null" style="color:red;">{{errorMessage}}</div>

<!-- Playlist Input Bar -->
<form [formGroup]="loadPlaylistForm" (ngSubmit)="PlaylistSubmit()" #top>
  <div>
    <mat-form-field class="long-input">
      <mat-label>Playlist</mat-label>
      <input formControlName="playlistLink" matInput placeholder="Link or ID">
    </mat-form-field>

    <button mat-raised-button style="margin-right: 1%;" type="submit" color="primary">Submit</button>

    <button *ngIf="playlist != undefined" mat-raised-button type="button" color="primary" (click)="RefreshPlaylist()">Refresh</button>
  </div>
</form>

<!-- Search Bar -->
<form *ngIf="playlist != undefined" [formGroup]="resultSearchForm" (ngSubmit)="ResultsSearch()">
  <div>
    <mat-form-field class="long-input">
      <mat-label>Search</mat-label>
      <input formControlName="searchInput" matInput placeholder="Video Title or Channel Name">
    </mat-form-field>

    <button mat-raised-button type="submit" color="primary" style="margin-right: 1%;">Submit</button>

    <button mat-raised-button type="button" color="primary" style="margin-right: 1%;" (click)="ClearSearchString()">Clear</button>

    <mat-card class="listitemvideo">
      <div>
        {{playlist.playlistTitle}}
      </div>
      <div>
        Playlist Owner: {{playlist.channelOwner}}
      </div>
      <div *ngIf="videosToDisplay != undefined">
        Results: {{videosToDisplay.length}}
      </div>
    </mat-card>
  </div>
</form>

<!--<div *ngIf="ytEmbed">
  <iframe width="560" height="315" style=" position: fixed; float: right; right: 100px; top: 100px; z-index: 100;" [src]="ytEmbed" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div>-->

<div fxLayout="row">
  <!-- List of video results-->
  <div *ngIf="playlist != undefined" class="video-results">
    <div *ngFor="let video of videosToDisplay; index as i">
      <!--<a class="video-link" style=" color: white; text-decoration: none;" href="https://youtu.be/{{video.videoID}}&list={{playlistID}}" target="_blank">-->
      <mat-card class="listitemvideo" fxLayout="row" (click)="selectVideo(video.videoID)">
        <img src="{{video.thumbnail}}" style="max-width:15%; margin-right:1%; border-radius:25px;" alt="thumbnail">
        <div fxLayout="column">
          <p>{{video.title}}</p>
          <p>{{video.channelTitle}}</p>
          <p>Date Added: {{video.publishedDate | date}}</p>
        </div>
      </mat-card>
      <!--</a>-->
    </div>
  </div>

  <div *ngIf="ytEmbed">
    <iframe width="560" height="315" style="position:fixed; " [src]="ytEmbed" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
  </div>
</div>



<app-scroll-to-top></app-scroll-to-top>
